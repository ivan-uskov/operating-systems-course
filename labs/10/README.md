# Лабораторная работа №10

- [Лабораторная работа №10](#лабораторная-работа-10)
  - [Задания](#задания)
    - [Требования](#требования)
    - [Задание 1 — Создание и использование динамических библиотек в Windows — 50 баллов](#задание-1--создание-и-использование-динамических-библиотек-в-windows--50-баллов)
    - [Задание 2 — Создание и использование динамических библиотек в Linux — 50 баллов](#задание-2--создание-и-использование-динамических-библиотек-в-linux--50-баллов)
    - [Задание 3 — Создание и использование кроссплатформенных динамических библиотек — 150 баллов](#задание-3--создание-и-использование-кроссплатформенных-динамических-библиотек--150-баллов)
    - [Задание 4 — Приложение с поддержкой плагинов — 250 баллов](#задание-4--приложение-с-поддержкой-плагинов--250-баллов)

## Задания

- Для получения оценки "удовлетворительно" нужно набрать не менее 80 баллов.
- Для получения оценки "хорошо" нужно набрать не менее 200 баллов.
- Для получения оценки "отлично" нужно набрать не менее 400 баллов.

### Требования

Обязательно проверяйте успешность всех вызовов функций операционной системы и не оставляйте ошибки незамеченными.

Ваш код должен иметь уровень безопасности исключений не ниже базового.
Для этого разработайте (или возьмите готовую) RAII-обёртку, автоматизирующую
управление ресурсами операционной системы.

### Задание 1 — Создание и использование динамических библиотек в Windows — 50 баллов

Разработайте динамическую библиотеку для ОС Windows, содержащую функцию
для нахождения действительных корней квадратного уравнения.

Разработайте консольное приложение для Windows, которое запрашивает у пользователя
коэффициенты квадратного уравнения и выводит его действительные корни, используя функцию
из динамической библиотеки.

Разработайте скрипт на Python 3, который запрашивает у пользователя
коэффициенты квадратного уравнения и выводит его действительные корни,
используя функцию из динамической библиотеки.
**Внимание**, без выполнения этой части задания за работу будет выставлен коэффициент не выше 0.6.

### Задание 2 — Создание и использование динамических библиотек в Linux — 50 баллов

Разработайте динамическую библиотеку для ОС Linux, содержащую функцию
для нахождения действительных корней квадратного уравнения.

Разработайте консольное приложение для Linux, которое запрашивает у пользователя
коэффициенты квадратного уравнения и выводит его действительные корни, используя функцию
из динамической библиотеки.

Разработайте скрипт на Python 3, который запрашивает у пользователя
коэффициенты квадратного уравнения и выводит его действительные корни,
используя функцию из динамической библиотеки.
**Внимание**, без выполнения этой части задания за работу будет выставлен коэффициент не выше 0.6.

### Задание 3 — Создание и использование кроссплатформенных динамических библиотек — 150 баллов

Изучите документацию по созданию и подключению динамических библиотек в системе сборки CMake.

Разработайте кроссплатформенную динамическую библиотеку, которая предоставляет базу данных студентов.
Данные студентов должны храниться в оперативной памяти.
Используйте структуры данных, позволяющие выполнять операции поиска, вставки и удаления быстрее,
чем за линейное время.
Каждый студент имеет Id (беззнаковое целое число), имя, название специальности и год поступления.

База данных должна предоставлять следующие операции:

- Добавить студента. Попытка добавления студента с существующим ID является ошибкой.
- Удалить студента с указанным Id. Если студента с таким Id нет, операция завершается ошибкой.
- Найти всех студентов с указанным именем. Используйте паттерн "Итератор".
  (внешний или внутренний — на ваше усмотрение).
- Найти студента по его Id. Если студента с таким Id нет, должен возвращаться нулевой указатель.

**Внимание**, так как тип `Student` — это сложный тип данных,
библиотека должна предоставлять C-совместимый API.
Для удобства использования из C++-кода разработайте для библиотеки классы-обёртки,
выполняющие необходимые преобразования данных.

Разработайте кроссплатформенное приложение на C++, в котором проиллюстрируйте работу с операциями библиотеки.

Аналогичное приложение разработайте на Python.
**Внимание**, без Python-приложения за работу будет выставлен коэффициент не выше 0.8.

### Задание 4 — Приложение с поддержкой плагинов — 250 баллов

Разработайте кроссплатформенное консольное приложение, которое принимает с консоли команды и выполняет их.
Поддерживаются следующие команды:

- `AddShape <тип> <id> [параметры...]`. Создаёт фигуру указанного типа с уникальным идентификатором id
  и добавляет его в конец списка фигур композиции. Если фигура с таким идентификатором уже есть, выводится сообщение об ошибке.
- `DeleteShape <id>`. Удаляет фигуру с указанным id.
- `DrawSVG <filename>`. Рисует композицию фигур и записывает результат в SVG-файл с указанным именем.
  Фигуры должны быть нарисованы в порядке их добавления.
- `Help`. Выводит справку об имеющихся командах.

Например, следующая команда создаёт окружность зелёного цвета с центром в точке (30, 40) и радиусом 10.

```txt
AddShape circle sh1 #00FF00 30 40 10
```

Приложение должно поддерживать возможность расширения при помощи внешних плагинов.
Для этого при запуске оно должно загрузить из каталога plugins находящиеся там
все динамические библиотеки (.so или .dll файлы).

Динамические библиотеки должны добавлять в приложение поддержку новых типов фигур:

- Парсинг команд добавления фигур
- Создание экземпляров фигур
- Рисование фигур в формате SVG

Минимальные требования:

- Приложение должно поддерживать не менее двух типов фигур.
- Создайте не менее двух динамических библиотек,
  каждая из которых добавляет в приложение не менее двух новых типов фигур.

Подсказки:

- В библиотеке должны быть функции, позволяющие зарегистрировать новые типы объектов.
  Приложение должно искать эти функции по имени и вызывать их.
- В качестве фигур могут использоваться структуры, содержащие указатели на функции,
  как независящая от компилятора альтернатива виртуальным функциям.
